[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:install-claunch]
command=/app/scripts/install-claunch.sh
autostart=true
autorestart=false
startsecs=0
stderr_logfile=/var/log/supervisor/install-claunch.err.log
stdout_logfile=/var/log/supervisor/install-claunch.out.log
priority=1

[program:claude-simple-relay]
command=python3 /app/claude_relay_simple.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/claude-simple-relay.err.log
stdout_logfile=/var/log/supervisor/claude-simple-relay.out.log
environment=PYTHONUNBUFFERED="1",PORT="8085"
priority=3

[program:noderr-api]
command=python3 /app/noderr_api.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/noderr-api.err.log
stdout_logfile=/var/log/supervisor/noderr-api.out.log
environment=PYTHONUNBUFFERED="1",PORT="8080"
priority=4

[program:claunch-manager]
command=/app/scripts/manage-claunch.sh
directory=/app
autostart=true
autorestart=false
stderr_logfile=/var/log/supervisor/claunch-manager.err.log
stdout_logfile=/var/log/supervisor/claunch-manager.out.log
environment=HOME="/root",USER="root"
priority=2

[group:claude-system]
programs=install-claunch,claunch-manager,claude-simple-relay,noderr-api